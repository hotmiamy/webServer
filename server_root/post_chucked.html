<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>POST Request with Chunked Body</title>
</head>
<body>
<h2>POST Request with Chunked Body</h2>
<form id="postForm">
  <label for="data">Data:</label><br>
  <textarea id="data" name="data" rows="4" cols="50"></textarea><br><br>
  <button type="button" onclick="sendRequest()">Enviar</button>
</form>

<script>
function sendRequest() {
  var formData = new FormData();
  var data = document.getElementById("data").value;

  // Split data into chunks
  var chunkSize = 100; // You can adjust the chunk size as needed
  var chunks = [];
  for (var i = 0; i < data.length; i += chunkSize) {
    chunks.push(data.slice(i, i + chunkSize));
  }

  // Send chunks
  var index = 0;
  function sendChunk() {
    if (index < chunks.length) {
      var xhr = new XMLHttpRequest();
      xhr.open("POST", "http://localhost:8080/post_files/", true);
      xhr.setRequestHeader("Transfer-Encoding", "chunked"); // Indicate that the body is sent in chunks

      xhr.onload = function() {
        index++;
        sendChunk();
      };

      xhr.send(chunks[index]);
    }
  }

  sendChunk();
}
</script>
</body>
</html>